<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로필 수정 - 아로마펄스</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-2">
                    <img src="/static/logo-light.png" alt="아로마펄스" class="h-20">
                </a>
                <div class="flex items-center gap-4">
                    <button onclick="location.href='/dashboard'" class="text-gray-700 hover:text-teal-600">
                        <i class="fas fa-arrow-left mr-2"></i>대시보드로
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- 프로필 수정 카드 -->
            <div class="bg-white rounded-lg shadow-lg p-8">
                <div class="flex items-center justify-between mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">
                        <i class="fas fa-user-edit text-teal-600 mr-3"></i>프로필 수정
                    </h1>
                    <span id="user-type-badge" class="px-4 py-2 rounded-full text-sm font-bold"></span>
                </div>

                <!-- 기본 정보 섹션 -->
                <div class="mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-teal-500">
                        <i class="fas fa-info-circle text-teal-600 mr-2"></i>기본 정보
                    </h2>
                    
                    <form id="basic-form" class="space-y-4">
                        <!-- 프로필 이미지 -->
                        <div class="flex items-center space-x-6 mb-6">
                            <div class="relative">
                                <div class="w-32 h-32 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center border-4 border-teal-500">
                                    <img id="profile-image-preview" src="" alt="프로필 이미지" class="w-full h-full object-cover hidden">
                                    <i id="profile-image-icon" class="fas fa-user text-gray-400 text-5xl"></i>
                                </div>
                                <button type="button" onclick="document.getElementById('profile-image-input').click()" 
                                    class="absolute bottom-0 right-0 bg-teal-600 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-teal-700 shadow-lg">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 mb-2">프로필 사진</h3>
                                <p class="text-sm text-gray-600 mb-3">JPG, PNG 파일 (최대 5MB)</p>
                                <input type="file" id="profile-image-input" accept="image/jpeg,image/png,image/jpg" class="hidden" onchange="handleImageUpload(event)">
                                <div class="flex gap-2">
                                    <button type="button" onclick="document.getElementById('profile-image-input').click()" 
                                        class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm">
                                        <i class="fas fa-upload mr-2"></i>이미지 선택
                                    </button>
                                    <button type="button" onclick="removeProfileImage()" 
                                        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm">
                                        <i class="fas fa-trash mr-2"></i>삭제
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">이름 *</label>
                                <input type="text" name="name" id="name" required 
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold mb-2">이메일 *</label>
                                <input type="email" id="email" disabled 
                                    class="w-full px-4 py-2 border rounded-lg bg-gray-100 text-gray-600">
                                <p class="text-xs text-gray-500 mt-1">이메일은 변경할 수 없습니다</p>
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">휴대폰 번호</label>
                                <input type="tel" name="phone" id="phone" placeholder="010-1234-5678"
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold mb-2">지역</label>
                                <select name="region" id="region" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500">
                                    <option value="">선택하세요</option>
                                    <option value="서울">서울</option>
                                    <option value="경기">경기</option>
                                    <option value="인천">인천</option>
                                    <option value="부산">부산</option>
                                    <option value="대구">대구</option>
                                    <option value="대전">대전</option>
                                    <option value="광주">광주</option>
                                    <option value="울산">울산</option>
                                    <option value="세종">세종</option>
                                    <option value="강원">강원</option>
                                    <option value="충북">충북</option>
                                    <option value="충남">충남</option>
                                    <option value="전북">전북</option>
                                    <option value="전남">전남</option>
                                    <option value="경북">경북</option>
                                    <option value="경남">경남</option>
                                    <option value="제주">제주</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">성별</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center">
                                        <input type="radio" name="gender" value="남성" id="gender-male" class="mr-2">
                                        <span>남성</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="gender" value="여성" id="gender-female" class="mr-2">
                                        <span>여성</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold mb-2">연령대</label>
                                <select name="age_group" id="age_group" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500">
                                    <option value="">선택하세요</option>
                                    <option value="10대">10대</option>
                                    <option value="20대">20대</option>
                                    <option value="30대">30대</option>
                                    <option value="40대">40대</option>
                                    <option value="50대">50대</option>
                                    <option value="60대 이상">60대 이상</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- B2C 상세 정보 섹션 -->
                <div id="b2c-section" class="mb-8" style="display: none;">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-purple-500">
                        <i class="fas fa-user text-purple-600 mr-2"></i>B2C 상세 정보
                    </h2>
                    
                    <form id="b2c-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">스트레스 유형</label>
                            <select name="b2c_category" id="b2c_category" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">선택하세요</option>
                                <option value="daily_stress">일상 스트레스</option>
                                <option value="work_stress">직무 스트레스</option>
                            </select>
                        </div>

                        <!-- 일상 스트레스 세부 항목 -->
                        <div id="daily-stress-fields" style="display: none;">
                            <label class="block text-sm font-semibold mb-2">일상 스트레스 세부 유형</label>
                            <select name="b2c_subcategory" id="b2c_subcategory_daily" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">선택하세요</option>
                                <optgroup label="학생">
                                    <option value="student_high">고등학생</option>
                                    <option value="student_college">대학생</option>
                                    <option value="student_graduate">대학원생</option>
                                </optgroup>
                                <optgroup label="구직자">
                                    <option value="job_seeker_exam">고시 준비생</option>
                                    <option value="job_seeker_new">신규 졸업자</option>
                                    <option value="job_seeker_career">경력 전환 희망자</option>
                                    <option value="job_seeker_parttime">파트타임 구직자</option>
                                    <option value="job_seeker_short">단기 구직자</option>
                                    <option value="job_seeker_long">장기 구직자</option>
                                </optgroup>
                                <optgroup label="양육자">
                                    <option value="caregiver_working_mom">워킹맘</option>
                                    <option value="caregiver_working_dad">워킹대디</option>
                                    <option value="caregiver_fulltime">전업 양육자</option>
                                    <option value="caregiver_single">한부모</option>
                                </optgroup>
                            </select>
                        </div>

                        <!-- 직무 스트레스 세부 항목 -->
                        <div id="work-stress-fields" style="display: none;">
                            <label class="block text-sm font-semibold mb-2">업종</label>
                            <select name="b2c_subcategory" id="b2c_subcategory_work" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">선택하세요</option>
                                <option value="it_developer">IT 개발자</option>
                                <option value="design_planning">디자인 기획</option>
                                <option value="education_teacher">교육 강사</option>
                                <option value="medical_welfare">의료 복지</option>
                                <option value="service_customer">서비스 고객 응대</option>
                                <option value="manufacturing_production">제조 생산</option>
                                <option value="public_admin">공공 행정</option>
                                <option value="sales_marketing">영업 마케팅</option>
                                <option value="research_tech">연구 기술</option>
                            </select>
                        </div>
                    </form>
                </div>

                <!-- B2B 상세 정보 섹션 -->
                <div id="b2b-section" class="mb-8" style="display: none;">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-blue-500">
                        <i class="fas fa-building text-blue-600 mr-2"></i>B2B 상세 정보
                    </h2>
                    
                    <form id="b2b-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">비즈니스 유형</label>
                            <select name="b2b_category" id="b2b_category" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">선택하세요</option>
                                <option value="perfumer">조향사 (파트너 제휴)</option>
                                <option value="company">기업 (대량 납품/클래스)</option>
                                <option value="shop">매장 (제품 문의)</option>
                                <option value="independent">독립 직군</option>
                            </select>
                        </div>

                        <!-- 조향사 필드 -->
                        <div id="perfumer-fields" class="space-y-4" style="display: none;">
                            <div>
                                <label class="block text-sm font-semibold mb-2">공방/브랜드 이름</label>
                                <input type="text" name="b2b_business_name" id="perfumer_business_name" 
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">협업 관심 분야</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="perfumer_inquiry" value="제품개발" class="mr-2">
                                        <span>제품 공동 개발</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="perfumer_inquiry" value="워크숍" class="mr-2">
                                        <span>워크숍/클래스</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="perfumer_inquiry" value="유통" class="mr-2">
                                        <span>제품 유통</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 기업 필드 -->
                        <div id="company-fields" class="space-y-4" style="display: none;">
                            <div>
                                <label class="block text-sm font-semibold mb-2">기업명 *</label>
                                <input type="text" name="b2b_business_name" id="company_business_name" 
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">기업 규모</label>
                                <select name="b2b_company_size" id="b2b_company_size" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">선택하세요</option>
                                    <option value="startup">스타트업 (50명 미만)</option>
                                    <option value="small">중소기업 (50-300명)</option>
                                    <option value="medium">중견기업 (300-1000명)</option>
                                    <option value="large">대기업 (1000명 이상)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">부서</label>
                                <input type="text" name="b2b_department" id="b2b_department" placeholder="예: 인사팀, 복리후생팀"
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">직책</label>
                                <input type="text" name="b2b_position" id="b2b_position" placeholder="예: 팀장, 담당자"
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">문의 유형</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="company_inquiry" value="대량납품" class="mr-2">
                                        <span>대량 납품</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="company_inquiry" value="기업클래스" class="mr-2">
                                        <span>기업 단체 클래스</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="company_inquiry" value="복리후생" class="mr-2">
                                        <span>복리후생 프로그램</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="company_inquiry" value="워크샵" class="mr-2">
                                        <span>워크샵</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 매장 필드 -->
                        <div id="shop-fields" class="space-y-4" style="display: none;">
                            <div>
                                <label class="block text-sm font-semibold mb-2">매장명 *</label>
                                <input type="text" name="b2b_business_name" id="shop_business_name" 
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">매장 유형</label>
                                <select name="b2b_business_type" id="b2b_business_type" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">선택하세요</option>
                                    <option value="향수숍">향수/향기 전문점</option>
                                    <option value="라이프스타일">라이프스타일 편집샵</option>
                                    <option value="카페">카페/음료점</option>
                                    <option value="요가">요가/명상 센터</option>
                                    <option value="기타">기타</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">문의 유형</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="shop_inquiry" value="제품입고" class="mr-2">
                                        <span>제품 입고 문의</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="shop_inquiry" value="도매" class="mr-2">
                                        <span>도매 거래</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="shop_inquiry" value="협업" class="mr-2">
                                        <span>협업 제안</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 독립 직군 필드 -->
                        <div id="independent-fields" class="space-y-4" style="display: none;">
                            <div>
                                <label class="block text-sm font-semibold mb-2">독립 직군 유형</label>
                                <select name="b2b_independent_type" id="b2b_independent_type" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">선택하세요</option>
                                    <option value="자영업자">자영업자</option>
                                    <option value="창업자">창업자/스타트업</option>
                                    <option value="프리랜서">프리랜서</option>
                                    <option value="크리에이터">크리에이터/인플루언서</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">사업자명/활동명</label>
                                <input type="text" name="b2b_business_name" id="independent_business_name" 
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">사업/활동 분야</label>
                                <input type="text" name="b2b_business_type" id="independent_business_type" 
                                    placeholder="예: 콘텐츠 크리에이터, 웰니스 코치"
                                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">관심 분야</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="independent_inquiry" value="제품협업" class="mr-2">
                                        <span>제품 협업</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="independent_inquiry" value="홍보" class="mr-2">
                                        <span>홍보/마케팅</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="independent_inquiry" value="워크숍" class="mr-2">
                                        <span>워크숍/클래스</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 공통 B2B 필드 -->
                        <div>
                            <label class="block text-sm font-semibold mb-2">사업자 번호</label>
                            <input type="text" name="b2b_business_number" id="b2b_business_number" 
                                placeholder="000-00-00000"
                                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2">사업장 주소</label>
                            <input type="text" name="b2b_address" id="b2b_address" 
                                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                    </form>
                </div>

                <!-- 비밀번호 변경 섹션 -->
                <div class="mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-orange-500">
                        <i class="fas fa-lock text-orange-600 mr-2"></i>비밀번호 변경
                    </h2>
                    
                    <form id="password-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">현재 비밀번호</label>
                            <input type="password" name="current_password" id="current_password" 
                                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2">새 비밀번호</label>
                            <input type="password" name="new_password" id="new_password" minlength="8"
                                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
                            <p class="text-xs text-gray-500 mt-1">8자 이상 입력해주세요</p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2">새 비밀번호 확인</label>
                            <input type="password" name="new_password_confirm" id="new_password_confirm" minlength="8"
                                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
                        </div>
                        <button type="button" onclick="changePassword()" 
                            class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 font-bold">
                            <i class="fas fa-key mr-2"></i>비밀번호 변경
                        </button>
                    </form>
                </div>

                <!-- 저장 버튼 -->
                <div class="flex gap-4">
                    <button onclick="location.href='/dashboard'" 
                        class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-bold">
                        <i class="fas fa-times mr-2"></i>취소
                    </button>
                    <button onclick="saveProfile()" 
                        class="flex-1 bg-teal-600 text-white py-3 rounded-lg hover:bg-teal-700 font-bold">
                        <i class="fas fa-save mr-2"></i>저장하기
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/profile-edit.js"></script>
</body>
</html>
