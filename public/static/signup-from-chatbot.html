<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 - 아로마펄스</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .animated-bg {
            background: linear-gradient(-45deg, #14b8a6, #06b6d4, #3b82f6, #8b5cf6);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #14b8a6;
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
        }
        
        .progress-step {
            position: relative;
        }
        
        .progress-step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 100%;
            height: 2px;
            background: #e5e7eb;
            transform: translateY(-50%);
            z-index: -1;
        }
        
        .progress-step:last-child::after {
            display: none;
        }
        
        .progress-step.completed::after {
            background: #14b8a6;
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="animated-bg min-h-screen py-8 px-4">
    <!-- Progress Bar -->
    <div class="max-w-4xl mx-auto mb-8">
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6">
            <div class="flex items-center justify-between">
                <div class="progress-step completed flex-1 text-center">
                    <div class="w-12 h-12 bg-teal-600 text-white rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-check text-xl"></i>
                    </div>
                    <p class="text-sm font-bold text-teal-600">1. 챗봇 상담</p>
                </div>
                <div class="progress-step flex-1 text-center">
                    <div class="w-12 h-12 bg-teal-600 text-white rounded-full flex items-center justify-center mx-auto mb-2 animate-pulse">
                        <i class="fas fa-user-plus text-xl"></i>
                    </div>
                    <p class="text-sm font-bold text-teal-600">2. 회원가입</p>
                </div>
                <div class="progress-step flex-1 text-center">
                    <div class="w-12 h-12 bg-gray-200 text-gray-400 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-rocket text-xl"></i>
                    </div>
                    <p class="text-sm font-semibold text-gray-400">3. 서비스 시작</p>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-2xl mx-auto">
        <!-- 상담 요약 카드 -->
        <div id="consultation-summary" class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6 mb-6 fade-in hidden">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-clipboard-check text-teal-600 mr-2"></i>
                상담 내용 요약
            </h3>
            <div id="summary-content" class="space-y-3">
                <!-- 동적으로 생성 -->
            </div>
        </div>

        <!-- 회원가입 카드 -->
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 fade-in">
            <div class="text-center mb-6">
                <img src="/static/logo-light.png" alt="아로마펄스" class="h-16 mx-auto mb-4">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">
                    <span id="user-type-greeting">맞춤형 서비스</span>를 위한 회원가입
                </h1>
                <p class="text-gray-600 text-sm">상담 내용을 바탕으로 최적의 서비스를 제공해드립니다</p>
            </div>

            <!-- 이메일 회원가입 폼 -->
            <form id="signupForm" class="space-y-5">
                <!-- 자동 채워진 정보 표시 -->
                <div id="pre-filled-info" class="hidden bg-teal-50 border-2 border-teal-200 rounded-xl p-4 mb-6">
                    <p class="text-sm font-semibold text-teal-800 mb-2">
                        <i class="fas fa-magic mr-2"></i>상담 내용을 바탕으로 자동 입력되었습니다
                    </p>
                    <div id="pre-filled-list" class="text-xs text-teal-700 space-y-1">
                        <!-- 동적으로 생성 -->
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-bold mb-2 text-gray-700">
                            <i class="fas fa-user text-teal-600 mr-2"></i>이름 *
                        </label>
                        <input type="text" name="name" id="name" required 
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition"
                               placeholder="홍길동">
                    </div>

                    <div>
                        <label class="block text-sm font-bold mb-2 text-gray-700">
                            <i class="fas fa-phone text-teal-600 mr-2"></i>휴대폰 번호
                        </label>
                        <input type="tel" name="phone" id="phone"
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition"
                               placeholder="010-1234-5678">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">
                        <i class="fas fa-envelope text-teal-600 mr-2"></i>이메일 *
                    </label>
                    <input type="email" name="email" id="email" required 
                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition"
                           placeholder="your@email.com">
                </div>

                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">
                        <i class="fas fa-lock text-teal-600 mr-2"></i>비밀번호 *
                    </label>
                    <input type="password" name="password" id="password" required minlength="8"
                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition"
                           placeholder="8자 이상 입력">
                    <p class="text-xs text-gray-500 mt-1 ml-1">영문, 숫자 조합 8자 이상</p>
                </div>

                <!-- 추가 정보 (챗봇에서 수집 안 된 경우) -->
                <div id="additional-fields" class="space-y-5 hidden">
                    <div class="grid md:grid-cols-3 gap-5">
                        <div>
                            <label class="block text-sm font-bold mb-2 text-gray-700">
                                <i class="fas fa-map-marker-alt text-teal-600 mr-2"></i>지역 *
                            </label>
                            <select name="region" id="region" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition">
                                <option value="">선택하세요</option>
                                <option value="서울">서울</option>
                                <option value="경기">경기</option>
                                <option value="인천">인천</option>
                                <option value="부산">부산</option>
                                <option value="대구">대구</option>
                                <option value="대전">대전</option>
                                <option value="광주">광주</option>
                                <option value="울산">울산</option>
                                <option value="세종">세종</option>
                                <option value="강원">강원</option>
                                <option value="충북">충북</option>
                                <option value="충남">충남</option>
                                <option value="전북">전북</option>
                                <option value="전남">전남</option>
                                <option value="경북">경북</option>
                                <option value="경남">경남</option>
                                <option value="제주">제주</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2 text-gray-700">
                                <i class="fas fa-birthday-cake text-teal-600 mr-2"></i>연령대 *
                            </label>
                            <select name="age_group" id="age_group" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition">
                                <option value="">선택하세요</option>
                                <option value="10s">10대</option>
                                <option value="20s">20대</option>
                                <option value="30s">30대</option>
                                <option value="40s">40대</option>
                                <option value="50s">50대</option>
                                <option value="60s_plus">60대 이상</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2 text-gray-700">
                                <i class="fas fa-venus-mars text-teal-600 mr-2"></i>성별
                            </label>
                            <select name="gender" id="gender" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl transition">
                                <option value="">선택하세요</option>
                                <option value="male">남성</option>
                                <option value="female">여성</option>
                                <option value="other">기타</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Hidden fields for chatbot data -->
                <input type="hidden" name="chatbot_session_id" id="chatbot_session_id">
                <input type="hidden" name="user_type" id="user_type" value="B2C">
                <input type="hidden" name="detected_needs" id="detected_needs">

                <div class="pt-4">
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-teal-600 to-cyan-600 text-white px-6 py-4 rounded-xl hover:opacity-90 transition font-bold shadow-lg transform hover:scale-105">
                        <i class="fas fa-user-plus mr-2"></i>가입하고 맞춤 서비스 시작하기
                    </button>
                </div>
            </form>

            <!-- 소셜 로그인 -->
            <div class="mt-6">
                <div class="relative my-6">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-300"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-3 bg-white text-gray-500">또는 간편 가입</span>
                    </div>
                </div>

                <div class="grid grid-cols-3 gap-3">
                    <button onclick="socialSignup('naver')" 
                            class="flex items-center justify-center bg-[#03C75A] text-white p-3 rounded-xl hover:opacity-90 transition">
                        <i class="fab fa-naver text-xl"></i>
                    </button>
                    <button onclick="socialSignup('kakao')" 
                            class="flex items-center justify-center bg-[#FEE500] text-black p-3 rounded-xl hover:opacity-90 transition">
                        <i class="fas fa-comment text-xl"></i>
                    </button>
                    <button onclick="socialSignup('google')" 
                            class="flex items-center justify-center bg-white border-2 border-gray-300 text-gray-700 p-3 rounded-xl hover:bg-gray-50 transition">
                        <i class="fab fa-google text-xl"></i>
                    </button>
                </div>
            </div>

            <!-- 로그인 링크 -->
            <div class="mt-6 text-center">
                <p class="text-gray-600 text-sm">
                    이미 회원이신가요?
                    <a href="/login" class="text-teal-600 hover:text-teal-800 font-semibold ml-1">로그인</a>
                </p>
            </div>
        </div>

        <!-- 웰씨코리아 푸터 -->
        <div class="mt-8 text-center">
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4">
                <img src="/static/wellthy-korea-footer.png" alt="웰씨코리아" class="mx-auto" style="max-width: 400px; width: 100%;">
            </div>
        </div>
    </div>

    <script src="/static/signup-from-chatbot.js"></script>
    <!-- 사이드톡 AI 챗봇 -->
    <script src="https://pages.sidetalk.ai/sidetalk.js"></script>
    <script>
    SidetalkAI('init', {
        siteKey: '2836b61bcbfd435c0e1a407bf6ce71885c532aba4c648de494338d3942f565c1',
        buttonText: 'AI 상담',
        buttonBottom: '20px',
        buttonRight: '20px'
    });
    </script>
</body>
</html>
