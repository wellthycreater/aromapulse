# ë¸”ë¡œê·¸ ëŒ“ê¸€ ìˆ˜ì§‘ ë° B2B ë¦¬ë“œ ê´€ë¦¬ ì‹œìŠ¤í…œ

## ğŸ“Œ ì‹œìŠ¤í…œ ê°œìš”

ì•„ë¡œë§ˆí„ìŠ¤ ë¸”ë¡œê·¸ ëŒ“ê¸€ì„ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•˜ì—¬, **B2B ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ë“œë¥¼ ìë™ìœ¼ë¡œ ë°œêµ´í•˜ê³  ì²´ê³„ì ìœ¼ë¡œ ì‘ëŒ€**í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

### 1. ìë™ ëŒ“ê¸€ ìˆ˜ì§‘
- **ì…ë ¥**: ë„¤ì´ë²„ ë¸”ë¡œê·¸ URL
- **ì²˜ë¦¬**: 
  - 1ì°¨: ë„¤ì´ë²„ ëŒ“ê¸€ API ì‹œë„
  - 2ì°¨: API ì‹¤íŒ¨ ì‹œ ì‹¤ì œ ëŒ“ê¸€ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ìƒì„±
- **ì¶œë ¥**: ëŒ“ê¸€ ì €ì¥ + AI ë¶„ì„

### 2. AI ìë™ ë¶„ì„
| ë¶„ì„ í•­ëª© | ê°€ëŠ¥í•œ ê°’ | ì„¤ëª… |
|----------|----------|------|
| **ê°ì •** | positive, negative, neutral | ëŒ“ê¸€ì˜ ê°ì • í†¤ ë¶„ì„ |
| **ì‚¬ìš©ì ìœ í˜•** | B2C, B2B, null | "ì†ë‹˜", "ê³ ê°", "ë§ˆì‚¬ì§€", "ìŠ¤íŒŒ" ë“± í‚¤ì›Œë“œë¡œ íŒë‹¨ |
| **ì˜ë„** | êµ¬ë§¤ì˜ë„, B2Bë¬¸ì˜, ê°€ê²©ë¬¸ì˜, ë¬¸ì˜, ê¸ì •ë¦¬ë·°, ë¶€ì •ë¦¬ë·°, ì¼ë°˜ëŒ“ê¸€ | ëŒ“ê¸€ì˜ ëª©ì  íŒŒì•… |
| **í‚¤ì›Œë“œ** | ë°°ì—´ | ì¦ìƒ, ì œí’ˆ, í–¥ë£Œ, ì˜¤ì¼ ì¢…ë¥˜ ì¶”ì¶œ |

### 3. ì±—ë´‡ ìë™ ìƒì„±
**íŠ¸ë¦¬ê±° ì¡°ê±´**: 
- `intent` = 'êµ¬ë§¤ì˜ë„', 'B2Bë¬¸ì˜', 'ê°€ê²©ë¬¸ì˜' ì¤‘ í•˜ë‚˜

**ìƒì„± ë‚´ìš©**:
- ì±—ë´‡ ì„¸ì…˜ ìƒì„±
- ì‹œìŠ¤í…œ ë©”ì‹œì§€ (ë©”íƒ€ë°ì´í„° í¬í•¨)
- ì‚¬ìš©ì ë©”ì‹œì§€ (ëŒ“ê¸€ ë‚´ìš©)
- AI ì‘ë‹µ (ë§¥ë½ ê¸°ë°˜ ì¶”ê°€ ì§ˆë¬¸)

## ğŸ¢ B2B ë¦¬ë“œ ì‘ëŒ€ ì›Œí¬í”Œë¡œìš°

### ì‹¤ì œ ì‚¬ë¡€: ë§ˆì‚¬ì§€/ìŠ¤íŒŒ ë¹„ì¦ˆë‹ˆìŠ¤

**ëŒ“ê¸€ ì˜ˆì‹œ**:
```
"ìºë¦¬ì–´ì˜¤ì¼ì— ì—ì„¼ì…œì˜¤ì¼(ë² ë¥´ê°€ëª», ë¼ë²¤ë”)ì„ ì„ì–´ì„œ ëª©ê³¼ ë°ì½œí…Œ ë§ˆì‚¬ì§€ í•´ì£¼ê³  ìˆëŠ”ë° 
ì†ë‹˜ ë°˜ì‘ì´ ì¢‹ì•„ìš”. ì œí’ˆë¬¸ì˜ëŠ” ì–´ë””ë¡œ ë“œë¦¬ë©´ ë ê¹Œìš”"
```

### ìë™ ë¶„ì„ ê²°ê³¼
```json
{
  "user_type_prediction": "B2B",
  "intent": "B2Bë¬¸ì˜",
  "sentiment": "positive",
  "keywords": ["ë¼ë²¤ë”", "ë² ë¥´ê°€ëª»", "ì—ì„¼ì…œì˜¤ì¼", "ìºë¦¬ì–´ì˜¤ì¼"]
}
```

### AI ì‘ë‹µ (ìë™ ìƒì„±)
```
ğŸ¢ ë§ˆì‚¬ì§€/ìŠ¤íŒŒ ë¹„ì¦ˆë‹ˆìŠ¤ ê³ ê°ë‹˜ì„ ìœ„í•œ ë§ì¶¤ ìƒë‹´

ëŒ“ê¸€ ë‚´ìš©ì„ ë³´ë‹ˆ ì†ë‹˜ê»˜ ë§ˆì‚¬ì§€/ì¼€ì–´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì‹œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ìš´ì˜í•˜ê³  ê³„ì‹  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ë³´ë‹¤ ì •í™•í•œ ìƒë‹´ì„ ìœ„í•´ ëª‡ ê°€ì§€ ì—¬ì­¤ë´ë„ ë ê¹Œìš”?

ğŸ“‹ ì¶”ê°€ ì§ˆë¬¸:
1ï¸âƒ£ ì§€ì—­: ì–´ëŠ ì§€ì—­ì—ì„œ ìš´ì˜í•˜ê³  ê³„ì‹ ê°€ìš”? (ì œíœ´ ê³µë°© ë§¤ì¹­ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤)
2ï¸âƒ£ í•„ìš”í•˜ì‹  ì œí’ˆ í˜•íƒœ:
   â€¢ ì›ë£Œìš© ì˜¤ì¼ (ì§ì ‘ ë¸”ë Œë”©ìš©)
   â€¢ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì™„ì œí’ˆ (ë§ˆì‚¬ì§€ ì˜¤ì¼, ë£¸ìŠ¤í”„ë ˆì´, ë””í“¨ì €)
   â€¢ íŠ¹ì • ì œí’ˆ (ì–´ë–¤ ì œí’ˆì¸ì§€ ì•Œë ¤ì£¼ì„¸ìš”)
3ï¸âƒ£ ì‚¬ìš© ëª©ì : ì§ì ‘ ì‚¬ìš©? ì†ë‹˜ ì„œë¹„ìŠ¤ìš©? íŒë§¤ìš©?
4ï¸âƒ£ ì„ í˜¸ í–¥: ë¼ë²¤ë”, ë² ë¥´ê°€ëª» ì™¸ ë‹¤ë¥¸ í–¥ë„ í•„ìš”í•˜ì‹ ê°€ìš”?
5ï¸âƒ£ ì›” ì‚¬ìš©ëŸ‰: ëŒ€ëµì ì¸ ì›” ì‚¬ìš©ëŸ‰ì„ ì•Œë ¤ì£¼ì‹œë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤
```

### ìš´ì˜ì ì•¡ì…˜ í”„ë¡œì„¸ìŠ¤

```mermaid
graph TD
    A[ëŒ“ê¸€ ìˆ˜ì§‘] --> B[AI ë¶„ì„]
    B --> C{B2B ë¬¸ì˜?}
    C -->|Yes| D[ì±—ë´‡ ìë™ ìƒì„±]
    D --> E[ê³ ê° ì‘ë‹µ í™•ì¸]
    E --> F[ì§€ì—­ íŒŒì•…]
    F --> G{ë‹ˆì¦ˆ ë¶„ì„}
    G -->|ì›ë£Œ ì˜¤ì¼| H[ì§€ì—­ ê³µë°© ë§¤ì¹­ - ì›ë£Œ]
    G -->|ì™„ì œí’ˆ| I[ì¶”ê°€ ì§ˆì˜ í›„ ê³µë°© ë§¤ì¹­ - ì œí’ˆ]
    H --> J[ë‚©í’ˆ ì¤‘ê°œ]
    I --> J
    J --> K[ìœ ì‚¬ ì œí’ˆ ìì‚¬ëª° ë“±ë¡]
    C -->|No| L[ì¼ë°˜ ì‘ëŒ€]
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### blog_posts
```sql
CREATE TABLE blog_posts (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  post_id TEXT NOT NULL UNIQUE,
  title TEXT,
  url TEXT NOT NULL,
  published_at DATETIME,
  comment_count INTEGER DEFAULT 0
);
```

### blog_comments
```sql
CREATE TABLE blog_comments (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  post_id INTEGER NOT NULL,
  comment_id TEXT NOT NULL UNIQUE,
  author_name TEXT,
  author_id TEXT,
  content TEXT NOT NULL,
  sentiment TEXT,
  user_type_prediction TEXT,
  intent TEXT,
  keywords TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES blog_posts(id)
);
```

### chatbot_sessions
```sql
CREATE TABLE chatbot_sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id TEXT NOT NULL UNIQUE,
  visitor_id TEXT,
  detected_user_type TEXT,
  started_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### chatbot_messages
```sql
CREATE TABLE chatbot_messages (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id INTEGER NOT NULL,
  sender TEXT NOT NULL CHECK (sender IN ('user', 'bot')),
  content TEXT NOT NULL,
  intent TEXT,
  sentiment TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (session_id) REFERENCES chatbot_sessions(id)
);
```

## ğŸ”§ API ì—”ë“œí¬ì¸íŠ¸

### POST /api/blog-reviews/crawl-from-url
ëŒ“ê¸€ ìˆ˜ì§‘ ë° ë¶„ì„

**Request**:
```json
{
  "url": "https://blog.naver.com/aromapulse/223879507099"
}
```

**Response**:
```json
{
  "message": "ëŒ“ê¸€ ìˆ˜ì§‘ ë° ë¶„ì„ ì™„ë£Œ",
  "post_id": "223879507099",
  "blog_id": "aromapulse",
  "total_comments": 4,
  "purchase_intent_count": 1,
  "b2c_count": 0,
  "b2b_count": 1,
  "chatbot_sessions_created": 1
}
```

### GET /api/blog-reviews/posts
ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ (í†µê³„ í¬í•¨)

**Response**:
```json
{
  "posts": [
    {
      "id": 1,
      "post_id": "223879507099",
      "title": "ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ 223879507099",
      "url": "https://blog.naver.com/aromapulse/223879507099",
      "comment_count": 4,
      "purchase_intent_count": 1,
      "b2c_count": 0,
      "b2b_count": 1,
      "chatbot_session_count": 1
    }
  ],
  "count": 1
}
```

### GET /api/blog-reviews/posts/:post_id/comments
íŠ¹ì • í¬ìŠ¤íŠ¸ì˜ ëŒ“ê¸€ ëª©ë¡

### GET /api/blog-reviews/leads?user_type=B2B&intent=B2Bë¬¸ì˜
ë¦¬ë“œ ë°œêµ´ (í•„í„°ë§ ê°€ëŠ¥)

## ğŸ¨ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

### Admin í˜ì´ì§€ - ë¸”ë¡œê·¸ ê´€ë¦¬ íƒ­
1. **ë¸”ë¡œê·¸ URL ì…ë ¥ ì¹´ë“œ**
   - ì…ë ¥: ë„¤ì´ë²„ ë¸”ë¡œê·¸ URL
   - ë²„íŠ¼: "ëŒ“ê¸€ ìˆ˜ì§‘ ë° ë¶„ì„"
   
2. **ë“±ë¡ëœ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ ëª©ë¡**
   - ê° í¬ìŠ¤íŠ¸ ì¹´ë“œ í‘œì‹œ:
     - ì œëª©
     - URL
     - ëŒ“ê¸€ ìˆ˜
     - B2C/B2B ë¹„ìœ¨
     - ì±—ë´‡ ì„¸ì…˜ ìˆ˜
     - ì•¡ì…˜ ë²„íŠ¼ (ëŒ“ê¸€ ë³´ê¸°)

## ğŸ’¡ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜

### 1. ìë™í™”ëœ ë¦¬ë“œ ë°œêµ´
- ë¸”ë¡œê·¸ ëŒ“ê¸€ â†’ ìë™ ë¶„ì„ â†’ B2B ë¦¬ë“œ ì¶”ì¶œ
- ìˆ˜ì‘ì—… ì—†ì´ ì ì¬ ê³ ê° ë°œê²¬

### 2. ë§¥ë½ ê¸°ë°˜ ì‘ëŒ€
- ëŒ“ê¸€ ë‚´ìš© ë¶„ì„ìœ¼ë¡œ ê³ ê° ë‹ˆì¦ˆ íŒŒì•…
- ì ì ˆí•œ ì¶”ê°€ ì§ˆë¬¸ìœ¼ë¡œ ì •í™•í•œ ìƒë‹´

### 3. ì§€ì—­ ê¸°ë°˜ ë§¤ì¹­
- ê³ ê° ì§€ì—­ ì •ë³´ ìˆ˜ì§‘
- ê·¼ì²˜ ê³µë°© ìë™ ë§¤ì¹­

### 4. ë°ì´í„° ì¶•ì 
- ê³ ê° ë‹ˆì¦ˆ íŒ¨í„´ ë¶„ì„
- ì¸ê¸° ì œí’ˆ/í–¥ë£Œ íŒŒì•…
- ìì‚¬ëª° ìƒí’ˆ ê¸°íš ë°ì´í„°

## ğŸš€ í–¥í›„ ê°œì„  ë°©í–¥

### 1. ì‹¤ì œ ë„¤ì´ë²„ ëŒ“ê¸€ API í†µí•©
- í˜„ì¬: ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ
- ëª©í‘œ: ì‹¤ì œ API ì—°ë™ (ë„¤ì´ë²„ ê¶Œí•œ í•„ìš”)

### 2. ìë™ ê³µë°© ë§¤ì¹­
- ì§€ì—­ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•
- ìë™ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜

### 3. ì±—ë´‡ ê³ ë„í™”
- ë” ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” íë¦„
- ì´ë¯¸ì§€ ì²¨ë¶€ ì§€ì›
- ì‹¤ì‹œê°„ ì¬ê³  í™•ì¸

### 4. ë¦¬ë“œ ê´€ë¦¬ CRM
- ë¦¬ë“œ ìƒíƒœ ì¶”ì  (ì‹ ê·œ â†’ ìƒë‹´ì¤‘ â†’ ê±°ë˜ â†’ ì™„ë£Œ)
- ë¦¬ë“œë³„ ë©”ëª¨ ê¸°ëŠ¥
- ë¦¬ë§ˆì¸ë” ì„¤ì •

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: B2B ë§ˆì‚¬ì§€ ì—…ì²´
1. ëŒ“ê¸€: "ìºë¦¬ì–´ì˜¤ì¼ì— ì—ì„¼ì…œì˜¤ì¼(ë² ë¥´ê°€ëª», ë¼ë²¤ë”)ì„ ì„ì–´ì„œ..."
2. ë¶„ì„: B2B, B2Bë¬¸ì˜
3. ì±—ë´‡: ì§€ì—­/ì œí’ˆí˜•íƒœ/ì‚¬ìš©ëª©ì  ì§ˆë¬¸
4. ìš´ì˜ì: ì§€ì—­ ê³µë°© ë§¤ì¹­

### ì‹œë‚˜ë¦¬ì˜¤ 2: B2C ê°œì¸ ê³ ê°
1. ëŒ“ê¸€: "ë¶ˆë©´ì¦ìœ¼ë¡œ ê³ ìƒí•˜ëŠ”ë° ë¼ë²¤ë” ì˜¤ì¼ êµ¬ë§¤í•˜ê³  ì‹¶ì–´ìš”"
2. ë¶„ì„: B2C, êµ¬ë§¤ì˜ë„
3. ì±—ë´‡: ì œí’ˆ ì¶”ì²œ + í• ì¸ ì•ˆë‚´
4. ìš´ì˜ì: ì£¼ë¬¸ ì²˜ë¦¬

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì¼ë°˜ ëŒ“ê¸€
1. ëŒ“ê¸€: "ì¢‹ì€ ì •ë³´ ê°ì‚¬í•©ë‹ˆë‹¤!"
2. ë¶„ì„: null, ê¸ì •ë¦¬ë·°
3. ì±—ë´‡: ìƒì„± ì•ˆ í•¨
4. ìš´ì˜ì: ë³„ë„ ì•¡ì…˜ ë¶ˆí•„ìš”

## ğŸ“š ì°¸ê³  ìë£Œ

- [Hono Framework](https://hono.dev/)
- [Cloudflare Workers](https://workers.cloudflare.com/)
- [Cloudflare D1 Database](https://developers.cloudflare.com/d1/)
