<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공방 상세 - 아로마펄스</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }
        .schedule-slot {
            transition: all 0.3s ease;
        }
        .schedule-slot:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .schedule-slot.selected {
            border-color: #7c3aed;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-3">
                    <img src="/static/logo-light.png" alt="아로마펄스" class="h-12">
                </a>
                <div class="flex items-center space-x-6">
                    <a href="/local-studios" class="text-gray-700 hover:text-purple-600">
                        <i class="fas fa-arrow-left mr-2"></i>목록으로
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Loading -->
    <div id="loading" class="container mx-auto px-6 py-16 text-center">
        <i class="fas fa-spinner fa-spin text-4xl text-purple-600 mb-4"></i>
        <p class="text-gray-600">공방 정보를 불러오는 중...</p>
    </div>

    <!-- Main Content -->
    <div id="content" class="hidden">
        <!-- Studio Header -->
        <section class="hero-gradient text-white py-12">
            <div class="container mx-auto px-6">
                <div class="flex items-start justify-between">
                    <div>
                        <span id="category-badge" class="px-4 py-2 bg-white bg-opacity-20 rounded-full text-sm font-semibold mb-4 inline-block"></span>
                        <h1 id="studio-title" class="text-4xl font-bold mb-4"></h1>
                        <p id="studio-description" class="text-xl text-purple-100 mb-4"></p>
                        <div class="flex items-center space-x-6 text-purple-100">
                            <div>
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span id="studio-location"></span>
                            </div>
                            <div>
                                <i class="fas fa-phone mr-2"></i>
                                <span id="studio-phone"></span>
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="bg-white bg-opacity-20 rounded-lg px-6 py-4">
                            <div class="text-sm mb-1">무료 상담</div>
                            <div class="text-3xl font-bold">0원</div>
                            <div class="text-sm mt-1">30분 세션</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Studio Info -->
        <section class="container mx-auto px-6 py-8">
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Left: Studio Details -->
                <div class="md:col-span-2">
                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-info-circle text-purple-600 mr-2"></i>
                            공방 소개
                        </h2>
                        <p id="studio-full-description" class="text-gray-700 leading-relaxed"></p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-map-marked-alt text-purple-600 mr-2"></i>
                            위치 정보
                        </h2>
                        <div class="space-y-3">
                            <div class="flex items-start">
                                <i class="fas fa-map-marker-alt text-purple-600 w-6 mt-1"></i>
                                <div>
                                    <div id="studio-address" class="font-semibold text-gray-800"></div>
                                    <div id="studio-detailed-address" class="text-gray-600 text-sm"></div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-envelope text-purple-600 w-6"></i>
                                <span id="studio-postal" class="text-gray-600"></span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-gift text-purple-600 mr-2"></i>
                            제공 서비스
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="border-2 border-purple-200 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <i class="fas fa-comments text-purple-600 text-2xl mr-3"></i>
                                    <h3 class="font-bold text-gray-800">무료 상담</h3>
                                </div>
                                <p class="text-gray-600 text-sm">30분 무료 향기 상담</p>
                                <p class="text-purple-600 font-bold mt-2">0원</p>
                            </div>
                            <div class="border-2 border-pink-200 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <i class="fas fa-paint-brush text-pink-600 text-2xl mr-3"></i>
                                    <h3 class="font-bold text-gray-800">개인 맞춤 클래스</h3>
                                </div>
                                <p class="text-gray-600 text-sm">맞춤형 아로마 클래스</p>
                                <p class="text-pink-600 font-bold mt-2">가격 협의</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Booking Form -->
                <div>
                    <div class="bg-white rounded-xl shadow-lg p-6 sticky top-24">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-calendar-check text-purple-600 mr-2"></i>
                            예약하기
                        </h2>

                        <form id="booking-form" onsubmit="submitBooking(event)">
                            <!-- Booking Type -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    예약 유형
                                </label>
                                <select id="booking-type" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600">
                                    <option value="consultation">무료 상담 (30분)</option>
                                    <option value="custom_class">개인 맞춤 클래스 (가격 협의)</option>
                                </select>
                            </div>

                            <!-- Available Schedules -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    날짜 및 시간 선택
                                </label>
                                <div id="schedules-list" class="space-y-2 max-h-64 overflow-y-auto">
                                    <!-- 스케줄이 동적으로 추가됩니다 -->
                                </div>
                                <div id="no-schedules" class="text-center py-4 text-gray-500 text-sm hidden">
                                    예약 가능한 시간이 없습니다
                                </div>
                            </div>

                            <!-- Customer Info -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    이름
                                </label>
                                <input type="text" id="customer-name" required 
                                    class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600"
                                    placeholder="홍길동">
                            </div>

                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    이메일
                                </label>
                                <input type="email" id="customer-email" required 
                                    class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600"
                                    placeholder="example@email.com">
                            </div>

                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    전화번호
                                </label>
                                <input type="tel" id="customer-phone" required 
                                    class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600"
                                    placeholder="010-1234-5678">
                            </div>

                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    특별 요청사항 (선택)
                                </label>
                                <textarea id="special-requests" rows="3"
                                    class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600"
                                    placeholder="알레르기나 특별한 요청사항을 입력해주세요"></textarea>
                            </div>

                            <button type="submit" 
                                class="w-full bg-purple-600 text-white px-6 py-4 rounded-lg hover:bg-purple-700 transition font-bold text-lg">
                                <i class="fas fa-check-circle mr-2"></i>예약 완료하기
                            </button>
                        </form>

                        <p class="text-xs text-gray-500 mt-4 text-center">
                            <i class="fas fa-info-circle mr-1"></i>
                            예약 확정 후 이메일로 안내를 보내드립니다
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" style="display: none;">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 p-8 text-center">
            <div class="mb-6">
                <i class="fas fa-check-circle text-green-500 text-6xl mb-4"></i>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">예약이 완료되었습니다!</h2>
                <p class="text-gray-600">이메일로 예약 확인 메일을 발송했습니다.</p>
            </div>

            <div class="bg-purple-50 rounded-lg p-4 mb-6">
                <p class="text-sm text-gray-700 mb-3">
                    <i class="fas fa-calendar-alt text-purple-600 mr-2"></i>
                    캘린더에 일정을 추가하시겠습니까?
                </p>
                <button onclick="downloadICalendar()" 
                    class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition font-semibold">
                    <i class="fas fa-download mr-2"></i>iCalendar 다운로드
                </button>
                <p class="text-xs text-gray-500 mt-2">
                    구글 캘린더, 네이버 캘린더, 카카오 캘린더 등 모든 캘린더 앱과 호환됩니다
                </p>
            </div>

            <div class="flex gap-3">
                <button onclick="location.href='/local-studios'" 
                    class="flex-1 bg-gray-200 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-300 transition font-semibold">
                    목록으로
                </button>
                <button onclick="location.reload()" 
                    class="flex-1 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition font-semibold">
                    새 예약하기
                </button>
            </div>
        </div>
    </div>

    <script src="/static/studio-detail.js"></script>
</body>
</html>
