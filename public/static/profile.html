<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 프로필 - 아로마펄스</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .profile-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .info-card {
            transition: all 0.3s ease;
        }
        
        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-3">
                    <img src="/static/logo-light.png" alt="아로마펄스" class="h-12">
                    <span class="text-xl font-bold text-purple-600">아로마펄스</span>
                </a>
                <div class="flex items-center space-x-6">
                    <a href="/dashboard" class="text-gray-700 hover:text-purple-600 transition">
                        <i class="fas fa-th-large mr-2"></i>대시보드
                    </a>
                    <a href="/shop" class="text-gray-700 hover:text-purple-600 transition">
                        <i class="fas fa-shopping-bag mr-2"></i>쇼핑
                    </a>
                    <button onclick="logout()" class="text-red-600 hover:text-red-700 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>로그아웃
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Loading -->
    <div id="loading" class="flex items-center justify-center py-32">
        <div class="text-center">
            <i class="fas fa-spinner fa-spin text-6xl text-purple-600 mb-4"></i>
            <p class="text-gray-600 text-lg">프로필 정보를 불러오는 중...</p>
        </div>
    </div>

    <!-- Main Content -->
    <div id="profile-content" class="hidden container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <!-- Profile Header -->
            <div class="profile-card rounded-2xl shadow-2xl p-8 mb-8">
                <div class="flex items-center space-x-6">
                    <div class="w-24 h-24 gradient-bg rounded-full flex items-center justify-center text-white text-4xl font-bold">
                        <span id="user-initial">A</span>
                    </div>
                    <div class="flex-1">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">
                            <span id="user-name">사용자</span>님
                        </h1>
                        <div class="flex items-center space-x-4 text-sm text-gray-600">
                            <div class="flex items-center">
                                <i class="fas fa-envelope mr-2 text-purple-600"></i>
                                <span id="user-email">email@example.com</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-user-tag mr-2 text-purple-600"></i>
                                <span id="user-type-badge" class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-semibold">일반 회원</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-calendar mr-2 text-purple-600"></i>
                                <span id="user-created">가입일: 2024-01-01</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="toggleEditMode()" class="px-6 py-3 gradient-bg text-white rounded-xl hover:opacity-90 transition font-semibold shadow-lg">
                        <i class="fas fa-edit mr-2"></i>프로필 수정
                    </button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="bg-white rounded-2xl shadow-xl mb-8">
                <div class="flex border-b">
                    <button onclick="switchTab('info')" class="tab-button active flex-1 py-4 px-6 font-semibold rounded-tl-2xl" id="tab-info">
                        <i class="fas fa-user mr-2"></i>기본 정보
                    </button>
                    <button onclick="switchTab('details')" class="tab-button flex-1 py-4 px-6 font-semibold" id="tab-details">
                        <i class="fas fa-clipboard-list mr-2"></i>상세 정보
                    </button>
                    <button onclick="switchTab('orders')" class="tab-button flex-1 py-4 px-6 font-semibold rounded-tr-2xl" id="tab-orders">
                        <i class="fas fa-shopping-cart mr-2"></i>주문 내역
                    </button>
                </div>

                <!-- Tab Content: 기본 정보 -->
                <div id="content-info" class="tab-content p-8">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-user text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">이름</h3>
                            </div>
                            <p id="display-name" class="text-gray-700 text-lg">-</p>
                            <input type="text" id="edit-name" class="hidden w-full px-4 py-2 border-2 border-gray-200 rounded-lg mt-2">
                        </div>

                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-phone text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">휴대폰 번호</h3>
                            </div>
                            <p id="display-phone" class="text-gray-700 text-lg">-</p>
                            <input type="tel" id="edit-phone" class="hidden w-full px-4 py-2 border-2 border-gray-200 rounded-lg mt-2">
                        </div>

                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-map-marker-alt text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">지역</h3>
                            </div>
                            <p id="display-region" class="text-gray-700 text-lg">-</p>
                            <select id="edit-region" class="hidden w-full px-4 py-2 border-2 border-gray-200 rounded-lg mt-2">
                                <option value="">선택하세요</option>
                                <option value="서울">서울</option>
                                <option value="경기">경기</option>
                                <option value="인천">인천</option>
                                <option value="부산">부산</option>
                                <option value="대구">대구</option>
                                <option value="대전">대전</option>
                                <option value="광주">광주</option>
                                <option value="울산">울산</option>
                                <option value="세종">세종</option>
                                <option value="강원">강원</option>
                                <option value="충북">충북</option>
                                <option value="충남">충남</option>
                                <option value="전북">전북</option>
                                <option value="전남">전남</option>
                                <option value="경북">경북</option>
                                <option value="경남">경남</option>
                                <option value="제주">제주</option>
                            </select>
                        </div>

                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-birthday-cake text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">연령대</h3>
                            </div>
                            <p id="display-age" class="text-gray-700 text-lg">-</p>
                            <select id="edit-age" class="hidden w-full px-4 py-2 border-2 border-gray-200 rounded-lg mt-2">
                                <option value="">선택하세요</option>
                                <option value="10s">10대</option>
                                <option value="20s">20대</option>
                                <option value="30s">30대</option>
                                <option value="40s">40대</option>
                                <option value="50s">50대</option>
                                <option value="60s_plus">60대 이상</option>
                            </select>
                        </div>

                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-venus-mars text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">성별</h3>
                            </div>
                            <p id="display-gender" class="text-gray-700 text-lg">-</p>
                            <select id="edit-gender" class="hidden w-full px-4 py-2 border-2 border-gray-200 rounded-lg mt-2">
                                <option value="">선택하세요</option>
                                <option value="male">남성</option>
                                <option value="female">여성</option>
                                <option value="other">기타</option>
                            </select>
                        </div>

                        <div class="info-card border-2 border-gray-200 rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-heart-pulse text-purple-600 text-2xl mr-3"></i>
                                <h3 class="text-lg font-bold text-gray-800">관심 증상</h3>
                            </div>
                            <p id="display-symptoms" class="text-gray-700">-</p>
                        </div>
                    </div>

                    <!-- 수정 모드 버튼 -->
                    <div id="edit-buttons" class="hidden flex gap-4 mt-8">
                        <button onclick="saveProfile()" class="flex-1 gradient-bg text-white py-3 rounded-xl hover:opacity-90 transition font-bold shadow-lg">
                            <i class="fas fa-save mr-2"></i>저장하기
                        </button>
                        <button onclick="cancelEdit()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl hover:bg-gray-300 transition font-bold">
                            <i class="fas fa-times mr-2"></i>취소
                        </button>
                    </div>
                </div>

                <!-- Tab Content: 상세 정보 -->
                <div id="content-details" class="tab-content hidden p-8">
                    <div id="details-container" class="space-y-6">
                        <!-- 동적으로 생성 -->
                    </div>
                </div>

                <!-- Tab Content: 주문 내역 -->
                <div id="content-orders" class="tab-content hidden p-8">
                    <div class="text-center py-12">
                        <i class="fas fa-shopping-bag text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-600 text-lg mb-4">주문 내역이 없습니다</p>
                        <a href="/shop" class="inline-block px-6 py-3 gradient-bg text-white rounded-xl hover:opacity-90 transition font-semibold">
                            <i class="fas fa-shopping-cart mr-2"></i>쇼핑하러 가기
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 웰씨코리아 푸터 -->
        <div class="mt-8 text-center pb-8">
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 max-w-2xl mx-auto">
                <img src="/static/wellthy-korea-footer.png" alt="웰씨코리아" class="mx-auto" style="max-width: 500px; width: 100%;">
            </div>
        </div>
    </div>

    <script src="/static/profile.js"></script>
    <!-- 사이드톡 AI 챗봇 -->
    <script src="https://pages.sidetalk.ai/sidetalk.js"></script>
    <script>
    SidetalkAI('init', {
        siteKey: '2836b61bcbfd435c0e1a407bf6ce71885c532aba4c648de494338d3942f565c1',
        buttonText: 'AI 상담',
        buttonBottom: '20px',
        buttonRight: '20px'
    });
    </script>
</body>
</html>
