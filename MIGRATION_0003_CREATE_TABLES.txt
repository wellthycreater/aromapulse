=== Migration 0003: workshop_quotes í…Œì´ë¸” ìƒì„± ===

ğŸ“Œ ì£¼ì˜: ê° ì¿¼ë¦¬ë¥¼ í•˜ë‚˜ì”© ì‹¤í–‰í•˜ì„¸ìš”!

--- ì¿¼ë¦¬ 1: instructors í…Œì´ë¸” ìƒì„± ---
CREATE TABLE IF NOT EXISTS instructors (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, type TEXT NOT NULL CHECK(type IN ('perfumer', 'psychologist', 'mental_care', 'other')), title TEXT, specialization TEXT, bio TEXT, experience_years INTEGER, email TEXT, phone TEXT, hourly_rate INTEGER, daily_rate INTEGER, profile_image_url TEXT, certifications TEXT, is_available INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP);

--- ì¿¼ë¦¬ 2: workshop_quotes í…Œì´ë¸” ìƒì„± ---
CREATE TABLE IF NOT EXISTS workshop_quotes (id INTEGER PRIMARY KEY AUTOINCREMENT, workshop_id INTEGER NOT NULL, user_id INTEGER NOT NULL, company_name TEXT NOT NULL, company_contact_name TEXT NOT NULL, company_contact_phone TEXT NOT NULL, company_contact_email TEXT NOT NULL, company_department TEXT, participant_count INTEGER NOT NULL, preferred_date DATETIME, preferred_location TEXT, duration_hours INTEGER, requested_instructors TEXT, special_requests TEXT, budget_range TEXT, is_workation INTEGER DEFAULT 0, workation_destination TEXT, workation_duration_days INTEGER, status TEXT DEFAULT 'pending' CHECK(status IN ('pending', 'reviewed', 'quoted', 'accepted', 'rejected', 'completed')), quoted_price INTEGER, quote_details TEXT, admin_notes TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (workshop_id) REFERENCES workshops(id), FOREIGN KEY (user_id) REFERENCES users(id));

--- ì¿¼ë¦¬ 3: workshop_instructors í…Œì´ë¸” ìƒì„± ---
CREATE TABLE IF NOT EXISTS workshop_instructors (id INTEGER PRIMARY KEY AUTOINCREMENT, workshop_id INTEGER NOT NULL, instructor_id INTEGER NOT NULL, quote_id INTEGER, role TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (workshop_id) REFERENCES workshops(id), FOREIGN KEY (instructor_id) REFERENCES instructors(id), FOREIGN KEY (quote_id) REFERENCES workshop_quotes(id), UNIQUE(workshop_id, instructor_id));

--- ì¿¼ë¦¬ 4: workation_packages í…Œì´ë¸” ìƒì„± ---
CREATE TABLE IF NOT EXISTS workation_packages (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, destination TEXT NOT NULL, theme TEXT, duration_days INTEGER NOT NULL, min_participants INTEGER, max_participants INTEGER, price_per_person INTEGER, included_items TEXT, image_url TEXT, thumbnail_urls TEXT, is_active INTEGER DEFAULT 1, available_seasons TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP);

--- ì¿¼ë¦¬ 5: instructors ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_instructors_type ON instructors(type);

--- ì¿¼ë¦¬ 6: instructors ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_instructors_available ON instructors(is_available);

--- ì¿¼ë¦¬ 7: workshop_quotes ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workshop_quotes_workshop ON workshop_quotes(workshop_id);

--- ì¿¼ë¦¬ 8: workshop_quotes ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workshop_quotes_user ON workshop_quotes(user_id);

--- ì¿¼ë¦¬ 9: workshop_quotes ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workshop_quotes_status ON workshop_quotes(status);

--- ì¿¼ë¦¬ 10: workshop_instructors ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workshop_instructors_workshop ON workshop_instructors(workshop_id);

--- ì¿¼ë¦¬ 11: workshop_instructors ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workshop_instructors_instructor ON workshop_instructors(instructor_id);

--- ì¿¼ë¦¬ 12: workation_packages ì¸ë±ìŠ¤ ---
CREATE INDEX IF NOT EXISTS idx_workation_packages_active ON workation_packages(is_active);

--- ê²€ì¦: í…Œì´ë¸” ìƒì„± í™•ì¸ ---
SELECT name FROM sqlite_master WHERE type='table' AND name IN ('instructors', 'workshop_quotes', 'workshop_instructors', 'workation_packages') ORDER BY name;

=== ì‹¤í–‰ ìˆœì„œ ===
1. ì¿¼ë¦¬ 1~4: í…Œì´ë¸” ìƒì„± (í•˜ë‚˜ì”© ì‹¤í–‰)
2. ì¿¼ë¦¬ 5~12: ì¸ë±ìŠ¤ ìƒì„± (í•˜ë‚˜ì”© ì‹¤í–‰)
3. ê²€ì¦ ì¿¼ë¦¬: 4ê°œ í…Œì´ë¸”ì´ ëª¨ë‘ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸

âœ… ì„±ê³µí•˜ë©´ DB_MIGRATION_0037_STEP_BY_STEP.txtë¡œ ì´ë™í•˜ì„¸ìš”!
